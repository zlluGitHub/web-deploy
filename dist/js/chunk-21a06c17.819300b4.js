(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21a06c17"],{4050:function(e,r,o){"use strict";o.r(r);var t=function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",{staticClass:"upload-index"},[o("uploader",{ref:"uploader",staticClass:"uploader-example",attrs:{options:e.options},on:{"file-added":e.onFileAdded,"file-success":e.onFileSuccess,"file-error":e.onFileError,"file-removed":e.fileRemoved}},[o("uploader-unsupport"),o("uploader-drop",[o("p",[e._v("Drop files here to upload or")]),o("uploader-btn",[e._v("select files")]),o("uploader-btn",{attrs:{attrs:e.attrs}},[e._v("select images")]),o("uploader-btn",{attrs:{directory:!0}},[e._v("select folder")])],1),o("uploader-list")],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("span",{staticClass:"filetotal"},[e._v("共计: "+e._s(e.file_total))]),o("span",{directives:[{name:"show",rawName:"v-show",value:e.controllerErrorFileDialog,expression:"controllerErrorFileDialog"}],attrs:{type:"danger",plain:""},on:{click:function(r){e.errorDialog=!0}}},[e._v("错误信息")]),o("span",{on:{click:e.cancelUpload}},[e._v("取消上传")]),o("span",{attrs:{type:"primary"},on:{click:e.submitUpload}},[e._v("开始上传")])])],1)},i=[],l=(o("b0c0"),o("ac1f"),o("1276"),{components:{},data:function(){return{controllerErrorFileDialog:!1,options:{target:"//localhost:3000/upload",testChunks:!1,chunkSize:1073741824,query:{type:"",create_time:""},headers:{Authorization:""}},statusText:{success:"上传成功",error:"上传失败",uploading:"上传中",paused:"暂停中",waiting:"等待中"},attrs:{accept:"image/*"},file_total:0,errorfilelist:[]}},watch:{},created:function(){},mounted:function(){},methods:{onFileAdded:function(e){var r=this,o=e.name.substring(e.name.lastIndexOf(".")+1),t=o===this.uploadType;if(t)e.pause();else{var i={rootname:"无",name:e.name,errorinfo:"文件不是 "+this.uploadType+" 格式"},l=e.relativePath.split("/");l.length>1&&(i["rootname"]=l[0]),this.errorfilelist.push(i),e.ignored=!0}this.$nextTick((function(){r.file_total=r.$refs["uploader"].files.length})),0!==this.errorfilelist.length&&(this.controllerErrorFileDialog=!0)},onFileSuccess:function(e,r,o,t){var i=JSON.parse(o);if(1e4!==i.code){var l={rootname:"无",name:r.name,errorinfo:i.message};!0===e.isFolder&&(l["rootname"]=e.name),this.errorfilelist.push(l),this.controllerErrorFileDialog=!0}},onFileError:function(e,r,o,t){var i={rootname:"无",name:r.name,errorinfo:"文件上传失败"};!0===e.isFolder&&(i["rootname"]=e.name),this.errorfilelist.push(i),this.controllerErrorFileDialog=!0},fileRemoved:function(e){var r=this;this.$nextTick((function(){r.file_total=r.$refs["uploader"].files.length}))},submitUpload:function(){var e=this;this.$nextTick((function(){for(var r=0;r<e.$refs["uploader"].files.length;r++)e.$refs["uploader"].files[r].resume()}))},closeErrorDialog:function(){this.errorDialog=!1},handelClose:function(){this.clearcache(),this.thirdDialog=!1},clearcache:function(){this.file_total=0,this.errorfilelist=[],this.controllerErrorFileDialog=!1,this.$refs.uploader.uploader.cancel()},cancelUpload:function(){this.thirdDialog=!1,this.clearcache()}}}),a=l,s=(o("9022"),o("2877")),n=Object(s["a"])(a,t,i,!1,null,"32e61b97",null);r["default"]=n.exports},"75bd":function(e,r,o){},9022:function(e,r,o){"use strict";o("75bd")}}]);