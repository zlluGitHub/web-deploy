(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fecbfd8"],{"0229":function(t,e,i){"use strict";i("a158")},"0a0d":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"swd-index"},[o("div",{staticClass:"header"},[o("Decorate",{attrs:{icon:"ivu-icon ivu-icon-md-cube",title:"工作台",describe:"这里将展示你的个人项目，当然也包括协同项目。"}},[o("div",{staticClass:"button-warp"},[o("Button",{attrs:{ghost:"",type:"primary",loading:t.refreshLoading,icon:"md-refresh"},on:{click:t.handleRefresh}},[t._v("重启所有服务")]),o("Button",{attrs:{ghost:"",type:"error",loading:t.powerLoading,icon:"md-power"},on:{click:t.handlePower}},[t._v("关闭所有服务")])],1)])],1),o("div",{staticClass:"content"},[o("div",[t.projectData&&t.projectData.length?o("ul",t._l(t.projectData,(function(e,i){return o("li",{key:e.bid+i},[o("div",{staticClass:"item-header"},["0"==e.isStatic?o("div",{staticClass:"left"},[o("span",{staticClass:"state"},[o("i",{style:{background:e.isServer?"#2d8cf0":"red"}}),o("span",[t._v(t._s(e.isServer?"服务已开启":"服务已关闭"))])]),o("span",{staticClass:"state auto"},[o("i",{style:{background:e.isAuto?"#2d8cf0":"red"}}),o("span",[t._v(t._s(e.isAuto?"部署已开启":"部署已暂停"))])])]):t._e(),"1"==e.isStatic?o("div",{staticClass:"left"},[o("span",{staticClass:"state"},[o("i",{style:{background:e.isServer?"#2d8cf0":"red"}}),e.port?o("span",[t._v(t._s(e.isServer?"服务已开启":"服务已关闭"))]):o("span",[t._v("静态服务")])])]):t._e(),"5"==e.isStatic||"6"==e.isStatic?o("div",{staticClass:"left"},[o("span",{staticClass:"state"},[o("i",{style:{background:"#2d8cf0"}}),o("span",[t._v("远程部署（"+t._s("5"==e.isStatic?"手动":"自动")+"）")])])]):t._e(),e.port?o("div",{staticClass:"right"},[o("Dropdown",{attrs:{trigger:"click"}},[o("Icon",{attrs:{type:"md-more",size:"18"}}),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e.port?o("DropdownItem",{nativeOn:{click:function(i){return t.handleReload(e)}}},[t._v(" 重启运行服务 ")]):t._e(),e.port?o("DropdownItem",{nativeOn:{click:function(i){return t.handleProt(e)}}},[t._v(" "+t._s(e.isServer?"关闭":"开启")+"运行服务 ")]):t._e(),"0"===e.isStatic||"6"===e.isStatic?o("DropdownItem",{nativeOn:{click:function(i){return t.handleAuto(e)}}},[t._v(" "+t._s(e.isAuto?"关闭":"开启")+"自动部署 ")]):t._e(),"0"===e.isStatic||"1"===e.isStatic?o("DropdownItem",{nativeOn:{click:function(i){return t.handleGzip(e)}}},[t._v(" "+t._s(e.gzip?"关闭":"开启")+"Gzip模式 ")]):t._e(),"0"===e.isStatic||"1"===e.isStatic?o("DropdownItem",{nativeOn:{click:function(i){return t.handleHistory(e)}}},[t._v(" "+t._s("hash"===e.router?"切换至History模式":"切换至Hash模式")+" ")]):t._e()],1)],1)],1):t._e()]),"0"==e.isStatic||"1"==e.isStatic?o("h2",{on:{click:function(i){return t.handleRouter("/create",e.bid,e.isStatic)}}},[t._v(" "+t._s(e.title)+" ")]):"6"==e.isStatic||"5"==e.isStatic?o("h2",{on:{click:function(i){return t.handleRouter("/createRemote",e.bid,e.isStatic)}}},[t._v(" "+t._s(e.title)+" ")]):t._e(),"0"==e.isStatic||"1"==e.isStatic?o("p",[o("Icon",{attrs:{type:"ios-code-working",size:"20"}}),o("span",[t._v(t._s(e.router)+"模式")])],1):"6"==e.isStatic||"5"==e.isStatic?o("p",[o("Icon",{attrs:{type:"ios-code-working",size:"20"}}),o("span",[t._v(t._s(e.sshServer.host))])],1):t._e(),o("p",[o("Icon",{attrs:{type:"ios-settings-outline",size:"18"}}),o("span",[t._v(t._s(t.deployType(e.isStatic))+t._s(e.port?"（"+e.port+"）":""))])],1),o("p",[o("Icon",{attrs:{type:"ios-time-outline",size:"18"}}),o("span",[t._v(t._s(e.time))])],1),o("div",{staticClass:"description"},[t._v(t._s(e.remark?e.remark:"暂无描述"))]),o("div",{staticClass:"bottom-list"},[o("Tooltip",{staticClass:"border-r-no",attrs:{content:"删除",placement:"top"}},[o("Icon",{attrs:{type:"ios-trash-outline",size:"20"},on:{click:function(i){return t.handleModalDelete(e)}}})],1),o("Tooltip",{staticClass:"border-r-no",attrs:{content:"更新项目",placement:"top"}},["0"==e.isStatic||"1"==e.isStatic?o("Icon",{attrs:{type:"ios-create-outline",size:"20"},on:{click:function(i){return t.handleRouter("/create",e.bid,e.isStatic)}}}):"3"==e.isStatic||"4"==e.isStatic?o("Icon",{attrs:{type:"ios-create-outline",size:"20"},on:{click:function(i){return t.handleRouter("/createBack",e.bid,e.isStatic)}}}):"6"==e.isStatic||"5"==e.isStatic?o("Icon",{attrs:{type:"ios-create-outline",size:"20"},on:{click:function(i){return t.handleRouter("/createRemote",e.bid,e.isStatic)}}}):t._e()],1),o("Tooltip",{class:"web"===t.isWebOrJava(e.isStatic)?"border-r-no":"",attrs:{content:"部署列表",placement:"top"}},[o("Icon",{attrs:{type:"ios-list",size:"26"},on:{click:function(i){return t.handleRouter("/commitList",e.bid,e.isStatic)}}})],1),"web"===t.isWebOrJava(e.isStatic)?o("Tooltip",{attrs:{content:"访问项目",placement:"top"}},[o("Icon",{attrs:{type:" fa fa-external-link",size:"14"},on:{click:function(i){return t.handleToUrl(e)}}})],1):t._e()],1)])})),0):o("div",{staticClass:"no-warp"},[o("img",{attrs:{src:i("5c25")}})]),o("div",{staticClass:"page"},[o("Page",{attrs:{"prev-text":"上一页","next-text":"下一页","show-elevator":"","show-total":"",total:t.total,"show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changeSizePage}})],1)])]),o("Modal",{attrs:{transfer:!1,title:"系统提示","ok-text":"确认删除"},model:{value:t.isModalDelete,callback:function(e){t.isModalDelete=e},expression:"isModalDelete"}},[o("div",{staticClass:"modal-box"},[o("div",[o("Checkbox",{model:{value:t.projectInfo,callback:function(e){t.projectInfo=e},expression:"projectInfo"}},[t._v("彻底删除项目所有相关信息，包含部署日志等"),o("span",[t._v("（不可恢复）"),o("Icon",{attrs:{type:"ios-information-circle"}})],1)]),o("Checkbox",{model:{value:t.projectBackups,callback:function(e){t.projectBackups=e},expression:"projectBackups"}},[t._v("彻底删除项目部署文件，包含版本备份文件等"),o("span",[t._v("（不可恢复）"),o("Icon",{attrs:{type:"ios-information-circle"}})],1)])],1)]),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"error",size:"large",long:"",loading:t.deleteLoading},on:{click:t.handleDeleteModal}},[t._v("确认删除")])],1)])],1)},a=[],s=(i("99af"),i("20d6")),n={components:{Decorate:s["a"]},data:function(){return{refreshLoading:!1,powerLoading:!1,deleteLoading:!1,pageNo:1,pageSize:10,total:0,projectData:[],serverData:{},isModalDelete:!1,projectPort:!0,projectInfo:!1,projectBackups:!1}},created:function(){this.handleGetData()},methods:{handleRefresh:function(){var t=this;this.$Modal.confirm({title:"系统提示",content:"<p>确定要重启所有项目服务吗？</p>",onOk:function(){t.refreshLoading=!0,t.$request.post("/swd/deploy/openAllServer").then((function(e){if(200===e.data.code){var i=setTimeout((function(){t.$Modal.success({title:"系统提示",content:"所有服务已重启成功！"}),t.refreshLoading=!1,clearTimeout(i)}),500);t.handleGetData()}}))}})},handlePower:function(){var t=this;this.$Modal.confirm({title:"系统提示",content:"<p>确定要关闭所有项目服务吗？</p>",onOk:function(){t.powerLoading=!0,t.$request.post("/swd/deploy/closeAllServer").then((function(e){if(200===e.data.code){var i=setTimeout((function(){t.$Modal.success({title:"系统提示",content:"所有服务均已关闭！"}),t.powerLoading=!1,clearTimeout(i)}),500);t.handleGetData()}}))}})},handleGetData:function(){var t=this,e={pageNo:this.pageNo,pageSize:this.pageSize};this.$request.get("/swd/deploy/get",{params:e}).then((function(e){200===e.data.code&&(t.total=e.data.count,t.projectData=e.data.data)}))},changePage:function(t){this.pageNo=t,this.handleGetData()},changeSizePage:function(t){this.pageSize=t,this.handleGetData()},handleReload:function(t){var e=this;this.$Message.loading({content:"服务正在重启中，请稍后...",duration:0}),this.$request.post("/swd/deploy/closeServer",{bid:t.bid,commitBid:t.commitBid,title:t.title,port:t.port}).then((function(i){200===i.data.code?e.$request.post("/swd/deploy/openServer",{bid:t.bid,commitBid:t.commitBid,title:t.title,port:t.port,proxy:t.proxy,www:t.www}).then((function(i){e.$Message.destroy(),200===i.data.code?(e.$Modal.success({title:"系统提示",content:t.title+"服务重启成功！"}),e.handleGetData()):e.$Modal.error({title:"系统提示",content:t.title+"服务重启失败！"})})):(e.$Message.destroy(),e.$Modal.error({title:"系统提示",content:t.title+"服务重启失败！"}))}))},handleProt:function(t){var e=this;t.isServer?this.$request.post("/swd/deploy/closeServer",{bid:t.bid,commitBid:t.commitBid,title:t.title,port:t.port}).then((function(i){200===i.data.code?(e.$Modal.success({title:"系统提示",content:t.title+"服务关闭成功！"}),e.handleGetData()):e.$Modal.error({title:"系统提示",content:t.title+"服务关闭失败！"})})):this.$request.post("/swd/deploy/openServer",{bid:t.bid,commitBid:t.commitBid,title:t.title,port:t.port,proxy:t.proxy,www:t.www}).then((function(i){200===i.data.code?(e.$Modal.success({title:"系统提示",content:t.title+"服务开启成功！"}),e.handleGetData()):e.$Modal.error({title:"系统提示",content:t.title+"服务开启失败！"})}))},handleGzip:function(t){var e=this,i="";t.gzip?(t.gzip=!1,i="已关闭Gzip模式！"):(t.gzip=!0,i="已开启Gzip模式！"),this.$request.post("/swd/deploy/updateInfo",t).then((function(t){200===t.data.code&&(e.$Modal.success({title:"系统提示",content:i}),e.handleGetData())}))},handleAuto:function(t){var e=this,i="";t.isAuto?(t.isAuto=!1,i="自动部署关闭成功！（此项目与Git不在关联，自动部署已暂停）"):(t.isAuto=!0,i="自动部署开启成功！（此项目与Git已关联，自动部署已开启）"),this.$request.post("/swd/deploy/updateInfo",{isAuto:t.isAuto,bid:t.bid}).then((function(o){200===o.data.code&&(e.$Modal.success({title:"系统提示",content:t.title+i}),e.handleGetData())}))},handleHistory:function(t){var e=this,i="",o="";"hash"===t.router?(t.router="history",i="History路由模式关闭成功！",o="History路由模式关闭失败！"):(t.router="hash",i="History路由模式开启成功！",o="History路由模式开启失败！"),this.$request.post("/swd/deploy/history",t).then((function(a){200===a.data.code?(e.$Modal.success({title:"系统提示",content:t.title+i}),e.handleGetData()):e.$Modal.error({title:"系统提示",content:t.title+o})})).catch((function(t){}))},handleModalDelete:function(t){this.serverData=t,this.isModalDelete=!0,this.projectPort=!0,this.projectInfo=!1,this.projectBackups=!1,this.deleteLoading=!1},handleDeleteModal:function(){var t=this;if(this.$Message.loading({content:"正在删除中，请稍后...",duration:0}),!this.projectInfo&&!this.projectBackups)return this.$Message.destroy(),void this.$Modal.error({title:"系统提示",content:"请至少选择一项后才可执行此操作！"});this.serverData.projectPort=this.projectPort,this.serverData.projectInfo=this.projectInfo,this.serverData.projectBackups=this.projectBackups,this.deleteLoading=!0,this.$request.post("/swd/deploy/deleteInfo",this.serverData).then((function(e){t.$Message.destroy(),200===e.data.code&&(t.deleteLoading=!1,t.isModalDelete=!1,t.$Modal.success({title:"系统提示",content:"此操作执行成功！"}),t.handleGetData())}))},handleRouter:function(t,e,i){this.$router.push({path:t,query:{bid:e,isStatic:i}})},handleToUrl:function(t){var e=window.open();e.opener=null,t.port?e.location="".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat(t.port):e.location="".concat(window.location.origin,"/").concat(t.www),e.target="_blank"},isWebOrJava:function(t){return"0"===t||"1"===t?"web":void 0},deployType:function(t){return"0"===t?"Web自动部署":"1"===t?"Web静态部署":"2"===t?"Java自动部署":"3"===t?"Java静态部署":"5"===t?"远程静态部署":"6"===t?"远程自动部署":void 0}}},r=n,c=(i("0229"),i("2877")),l=Object(c["a"])(r,o,a,!1,null,"879f401e",null);e["default"]=l.exports},"1dde":function(t,e,i){var o=i("d039"),a=i("b622"),s=i("2d00"),n=a("species");t.exports=function(t){return s>=51||!o((function(){var e=[],i=e.constructor={};return i[n]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"20d6":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"spots"},[i("span",{staticClass:"decorate",staticStyle:{background:"rgb(201, 27, 0)",width:"51px",height:"51px","margin-top":"-25.5px","margin-left":"-25.5px",top:"55.6675%",left:"5%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(23, 90, 171)",width:"28px",height:"28px","margin-top":"-14px","margin-left":"-14px",top:"10.2246%",left:"15%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(233, 34, 36)",width:"37px",height:"37px","margin-top":"-18.5px","margin-left":"-18.5px",top:"71.9133%",left:"25%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(0, 62, 135)",width:"47px",height:"47px","margin-top":"-23.5px","margin-left":"-23.5px",top:"22.8839%",left:"35%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(0, 135, 231)",width:"31px",height:"31px","margin-top":"-15.5px","margin-left":"-15.5px",top:"5.09172%",left:"45%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(23, 90, 171)",width:"52px",height:"52px","margin-top":"-26px","margin-left":"-26px",top:"32.1525%",left:"55%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(255, 86, 0)",width:"29px",height:"29px","margin-top":"-14.5px","margin-left":"-14.5px",top:"46.8035%",left:"65%"}}),i("span",{staticClass:"decorate",staticStyle:{width:"44px",height:"44px","margin-top":"-22px","margin-left":"-22px",top:"76.8537%",left:"75%"}}),i("span",{staticClass:"decorate",staticStyle:{background:"rgb(201, 27, 0)",width:"43px",height:"43px","margin-top":"-21.5px","margin-left":"-21.5px",top:"30.7088%",left:"85%"}}),i("span",{staticClass:"decorate",staticStyle:{width:"27px",height:"27px","margin-top":"-13.5px","margin-left":"-13.5px",top:"7.43497%",left:"95%"}}),i("div",{staticClass:"warp"},[i("div",{staticClass:"left"},[i("div",{staticClass:"logo"},[i("i",{class:t.icon})]),i("div",{staticClass:"info"},[i("h2",[t._v(t._s(t.title))]),i("p",[t._v(t._s(t.describe))])])]),t._t("default")],2)])},a=[],s={props:["icon","title","describe"]},n=s,r=(i("5c23"),i("2877")),c=Object(r["a"])(n,o,a,!1,null,"4c08b714",null);e["a"]=c.exports},"5c23":function(t,e,i){"use strict";i("b7f7")},"5c25":function(t,e,i){t.exports=i.p+"img/no-data.525d0c46.png"},8418:function(t,e,i){"use strict";var o=i("c04e"),a=i("9bf2"),s=i("5c6c");t.exports=function(t,e,i){var n=o(e);n in t?a.f(t,n,s(0,i)):t[n]=i}},"99af":function(t,e,i){"use strict";var o=i("23e7"),a=i("d039"),s=i("e8b5"),n=i("861d"),r=i("7b0b"),c=i("50c4"),l=i("8418"),d=i("65f0"),p=i("1dde"),u=i("b622"),h=i("2d00"),f=u("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",m=h>=51||!a((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),w=p("concat"),b=function(t){if(!n(t))return!1;var e=t[f];return void 0!==e?!!e:s(t)},y=!m||!w;o({target:"Array",proto:!0,forced:y},{concat:function(t){var e,i,o,a,s,n=r(this),p=d(n,0),u=0;for(e=-1,o=arguments.length;e<o;e++)if(s=-1===e?n:arguments[e],b(s)){if(a=c(s.length),u+a>g)throw TypeError(v);for(i=0;i<a;i++,u++)i in s&&l(p,u,s[i])}else{if(u>=g)throw TypeError(v);l(p,u++,s)}return p.length=u,p}})},a158:function(t,e,i){},b7f7:function(t,e,i){}}]);