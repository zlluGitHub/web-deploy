(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e032033a"],{"21ee":function(e,t,a){"use strict";a("7fc9")},"7fc9":function(e,t,a){},"8bbd":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"system-page"},[a("div",{staticClass:"header"},[a("Decorate",{attrs:{icon:"ivu-icon ivu-icon-ios-paper-outline",title:"个人中心",describe:"个性化设置，修改个人基本信息。"}})],1),a("div",{staticClass:"breadcrumb"},[a("div",{staticClass:"warp"},[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:"/"}},[a("Icon",{attrs:{type:"ios-home-outline",size:"18"}}),e._v(" 工作台 ")],1),a("BreadcrumbItem",{attrs:{to:"/system"}},[a("Icon",{attrs:{type:"ios-paper-outline",size:"18"}}),e._v(" 个人中心 ")],1)],1)],1)]),a("div",{staticClass:"content"},[a("section",[a("Form",{ref:"formRef",attrs:{model:e.formData,rules:e.formRule,"label-position":"top"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("FormItem",{attrs:{label:"昵称（可不填）"}},[a("Input",{attrs:{size:"large",maxlength:"15","show-word-limit":"",placeholder:"请输入用户名"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"邮箱",prop:"email"}},[a("Input",{attrs:{placeholder:"请输入用户邮箱",size:"large"},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1),a("FormItem",{attrs:{label:"密码",prop:"password"}},[a("Input",{attrs:{placeholder:"请输入用户密码",size:"large"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1)],1),a("div",{staticClass:"button-warp"},[a("Button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("更新信息")])],1)],1)])])},r=[],o=(a("b0c0"),a("20d6")),i={components:{Decorate:o["a"]},data:function(){return{formData:{},formRule:{email:[{required:!0,type:"email",message:"邮箱格式不正确，请重新输入！",trigger:"blur"}],password:[{required:!0,message:"用户密码不得为空！",trigger:"blur"}],name:[{required:!0,message:"用户姓名不得为空！",trigger:"blur"}],role:[{required:!0,message:"请选择角色！",trigger:"blur"}]}}},created:function(){var e=this;this.$nextTick((function(){e.$mitt.emit("full-loading",!1)})),this.formData=this.$session.getItem("userInfo")},methods:{handleSubmit:function(){var e=this;this.$refs.formRef.validate((function(t){t&&(e.loading=!0,e.$request.post("/wd/user/update",e.formData).then((function(t){e.loading=!1,200==t.data.code&&(e.$Message.success("操作成功！"),e.$session.setItem("userInfo",{bid:e.formData.bid,email:e.formData.email,name:e.formData.name,role:e.formData.role,url:e.formData.url}),e.formData.password="")})).catch((function(){e.loading=!1})))}))},updateUser:function(e){var t=this;this.$axios.post("/api/person/user/update",this.$qs.stringify(e)).then((function(e){e.data.result?t.getUser():t.$Message["error"]({background:!0,content:"信息更新失败！"})})).catch((function(e){console.log(e)}))},getUser:function(){var e=this;this.$axios.get("/api/person/user/list",{params:{bid:this.bid}}).then((function(t){if(e.$Message.destroy(),t.data.result){e.$Message["success"]({background:!0,content:"信息更新成功！"});var a=t.data.data[0];a.url=a.url.indexOf("http")>-1?a.url:e.$url+a.url,e.$store.commit("setUser",a),e.setUser()}else e.$Message["error"]({background:!0,content:"信息更新失败！"})})).catch((function(e){console.log(e)}))},handleFileSuccess:function(e,t,a){this.updateUser({bid:this.bid,url:"/"+e.fileInfo.path})}}},n=i,l=(a("21ee"),a("2877")),c=Object(l["a"])(n,s,r,!1,null,"52cb258e",null);t["default"]=c.exports}}]);