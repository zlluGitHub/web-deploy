(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],u=0,d=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);f&&f(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var r=n[o];0!==i[r]&&(a=!1)}a&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},o={app:0},i={app:0},s=[];function r(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-260ea520":"61fcf02d","chunk-45313881":"89ba7d4a","chunk-4f188ad8":"e8505eed","chunk-76c82fc2":"24738ade","chunk-5a134dbc":"5eab5c0b","chunk-796bdf3a":"c0376b4b","chunk-e032033a":"ed02c44e","chunk-eaede570":"43ae96ac","chunk-f987d758":"b15798e0"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-260ea520":1,"chunk-45313881":1,"chunk-4f188ad8":1,"chunk-76c82fc2":1,"chunk-5a134dbc":1,"chunk-796bdf3a":1,"chunk-e032033a":1,"chunk-eaede570":1,"chunk-f987d758":1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-260ea520":"d231b681","chunk-45313881":"924b38a1","chunk-4f188ad8":"e3976d2a","chunk-76c82fc2":"7e2035aa","chunk-5a134dbc":"18fcd902","chunk-796bdf3a":"d5675977","chunk-e032033a":"d6c9dd09","chunk-eaede570":"d103e4db","chunk-f987d758":"aa6e69a9"}[t]+".css",i=c.p+a,s=document.getElementsByTagName("link"),r=0;r<s.length;r++){var l=s[r],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===i))return e()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){l=d[r],u=l.getAttribute("data-href");if(u===a||u===i)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||i,s=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete o[t],f.parentNode.removeChild(f),n(s)},f.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){o[t]=0})));var a=i[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,n){a=i[t]=[e,n]}));e.push(a[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=r(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(f);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",d.name="ChunkLoadError",d.type=a,d.request=o,n[1](d)}i[t]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var f=u;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1d41":function(t,e,n){},"20d6":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spots"},[n("span",{staticClass:"decorate",staticStyle:{background:"rgb(201, 27, 0)",width:"51px",height:"51px","margin-top":"-25.5px","margin-left":"-25.5px",top:"55.6675%",left:"5%"}}),n("span",{staticClass:"decorate",staticStyle:{background:"rgb(23, 90, 171)",width:"28px",height:"28px","margin-top":"-14px","margin-left":"-14px",top:"10.2246%",left:"15%"}}),n("span",{staticClass:"decorate",staticStyle:{background:"rgb(233, 34, 36)",width:"37px",height:"37px","margin-top":"-18.5px","margin-left":"-18.5px",top:"71.9133%",left:"25%"}}),n("span",{staticClass:"decorate",staticStyle:{background:"rgb(0, 62, 135)",width:"47px",height:"47px","margin-top":"-23.5px","margin-left":"-23.5px",top:"22.8839%",left:"35%"}}),n("span",{staticClass:"decorate",staticStyle:{background:"rgb(0, 135, 231)",width:"31px",height:"31px","margin-top":"-15.5px","margin-left":"-15.5px",top:"5.09172%",left:"45%"}}),n("span",{staticClass:"decorate",staticStyle:{background:"rgb(23, 90, 171)",width:"52px",height:"52px","margin-top":"-26px","margin-left":"-26px",top:"32.1525%",left:"55%"}}),n("span",{staticClass:"decorate",staticStyle:{background:"rgb(255, 86, 0)",width:"29px",height:"29px","margin-top":"-14.5px","margin-left":"-14.5px",top:"46.8035%",left:"65%"}}),n("span",{staticClass:"decorate",staticStyle:{width:"44px",height:"44px","margin-top":"-22px","margin-left":"-22px",top:"76.8537%",left:"75%"}}),n("span",{staticClass:"decorate",staticStyle:{background:"rgb(201, 27, 0)",width:"43px",height:"43px","margin-top":"-21.5px","margin-left":"-21.5px",top:"30.7088%",left:"85%"}}),n("span",{staticClass:"decorate",staticStyle:{width:"27px",height:"27px","margin-top":"-13.5px","margin-left":"-13.5px",top:"7.43497%",left:"95%"}}),n("div",{staticClass:"warp"},[n("div",{staticClass:"left"},[n("div",{staticClass:"logo"},[n("i",{class:t.icon})]),n("div",{staticClass:"info"},[n("h2",[t._v(t._s(t.title))]),n("p",[t._v(t._s(t.describe))])])]),t._t("default")],2)])},o=[],i={props:["icon","title","describe"]},s=i,r=(n("5c23"),n("2877")),c=Object(r["a"])(s,a,o,!1,null,"4c08b714",null);e["a"]=c.exports},3670:function(t,e,n){},"38e2":function(t,e,n){"use strict";n("764e")},"3d6b":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"getItem",(function(){return it})),n.d(a,"setItem",(function(){return st})),n.d(a,"removeItem",(function(){return rt})),n.d(a,"updateItem",(function(){return ct})),n.d(a,"clear",(function(){return lt}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:"show"}},[n("router-view")],1),n("FullLoading",{model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}})],1)},s=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"loading"}},[t.isOpen?n("div",{class:["loading-box",{fixed:t.fixed}]},[n("div",{staticClass:"k-square-holder2"},[n("div",{staticClass:"k-square3 k-square3a"}),n("div",{staticClass:"k-square3 k-square3b"}),n("div",{staticClass:"k-square3 k-square3c"}),n("div",{staticClass:"k-square3 k-square3d"})])]):t._e()])},c=[],l={data:function(){return{isOpen:!0}},props:["value","fixed"],model:{prop:"value",event:"change"},created:function(){this.isOpen=this.value},watch:{value:function(t){this.isOpen=t},isOpen:function(t){this.$emit("change",t)}}},u=l,d=(n("aae7"),n("2877")),f=Object(d["a"])(u,r,c,!1,null,"772bea51",null),p=f.exports,h={components:{FullLoading:p},data:function(){return{isOpen:!0}},created:function(){var t=this;this.$mitt.on("full-loading",this.fullLoadingOpen),this.$request.get("/wd/oauth/config").then((function(e){200===e.data.code&&t.$store.commit("setConfig",e.data.data)}))},methods:{fullLoadingOpen:function(t){this.isOpen=t}},beforeDestroy:function(){this.$mitt.off("full-loading",this.fullLoadingOpen)}},m=h,g=Object(d["a"])(m,i,s,!1,null,null,null),v=g.exports,b=n("9483");Object(b["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("d3b7"),n("3ca3"),n("ddb0");var k=n("8c4f"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("Header"),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view",{key:t.key})],1),n("LogModal")],1)},w=[],_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"swd-header"},[n("div",{staticClass:"swd-section"},[n("div",{staticClass:"left"},[t._m(0),n("Menu",{attrs:{mode:"horizontal",theme:t.theme,"active-name":t.activeName},on:{"on-select":t.handleOnSelect}},[n("MenuItem",{attrs:{name:"1",to:"/"}},[n("Icon",{attrs:{type:"md-cube",size:"18"}}),t._v("工作台 ")],1),n("MenuItem",{attrs:{name:"2",to:"/create"}},[n("Icon",{attrs:{type:"md-add",size:"20"}}),t._v("本地项目 ")],1),n("MenuItem",{attrs:{name:"5",to:"/createRemote"}},[n("Icon",{attrs:{type:"md-add",size:"20"}}),t._v("远程项目 ")],1),"admin"==t.user.role?n("MenuItem",{attrs:{name:"4",to:"/user"}},[n("Icon",{attrs:{type:"ios-person",size:"24"}}),t._v("用户管理 ")],1):t._e(),n("MenuItem",{attrs:{name:"6"}},[n("span",{on:{click:function(e){return t.handleUrl("https://github.com/zlluGitHub/web-deploy")}}},[n("Icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"logo-github",size:"20"}}),t._v("Github ")],1)]),n("MenuItem",{attrs:{name:"7"}},[n("span",{on:{click:function(e){return t.handleUrl("https://github.com/zlluGitHub/web-deploy/issues")}}},[n("Icon",{attrs:{type:"ios-information-circle-outline",size:"20"}}),t._v("反馈（Issues） ")],1)])],1)],1),n("div",{staticClass:"right"},[n("Input",{staticClass:"input-warp",style:{width:t.isFocus?"300px":"200px"},attrs:{search:"",placeholder:"查找项目..."},on:{"on-search":t.handleOnSearch,"on-focus":function(e){t.isFocus=!0},"on-blur":function(e){t.isFocus=!1}},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}}),n("Dropdown",{staticClass:"dropdown-menu"},[n("div",{staticClass:"heade-menu"},[n("span",{staticClass:"img"},[t._v(t._s(t.user.text))]),n("span",{staticClass:"name"},[t._v(t._s(t.user.name))]),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{nativeOn:{click:function(e){return t.handleCenter.apply(null,arguments)}}},[n("Icon",{attrs:{type:"ios-person",size:"16"}}),t._v("个人中心")],1),n("DropdownItem",{nativeOn:{click:function(e){return t.handleQuit.apply(null,arguments)}}},[n("Icon",{attrs:{type:"ios-log-out",size:"16"}}),t._v("退出登录 ")],1)],1)],1)],1)])])},x=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-h1"},[a("div",{staticClass:"logo"},[a("img",{attrs:{src:n("93ca")}})])])}],O=(n("b0c0"),n("fb6a"),{data:function(){return{isFocus:!1,activeName:"1",theme:"dark",inputVal:"",password:"",isOpen:!1,user:{}}},created:function(){var t=this.$session.getItem("active-name");t&&(this.activeName=t)},mounted:function(){var t=this.$session.getItem("userInfo");t.text=t.name||t.email,this.user={text:t.text.slice(0,1),name:t.text,role:t.role}},methods:{handleOnSearch:function(t){"/"!==window.location.hostname&&this.$router.push({path:"/"}),this.$store.state.title=t},handleUrl:function(t){var e=window.open();e.opener=null,e.location=t,e.target="_blank"},handleOnSelect:function(t){this.activeName=t,this.$session.setItem("active-name",t),this.$mitt.emit("on-reload")},handleCenter:function(){this.$router.push({path:"/personal"})},handleQuit:function(){window.sessionStorage.clear(),this.$router.push({path:"/login"})}}}),C=O,S=(n("d9fc"),Object(d["a"])(C,_,x,!1,null,"466e01da",null)),$=S.exports,I=n("a33d"),D={components:{Header:$,LogModal:I["a"]},data:function(){return{key:1}},created:function(){this.$mitt.on("on-reload",this.onReload)},methods:{onReload:function(){this.key=this.key+1}},beforeDestroy:function(){this.$mitt.off("on-reload",this.onReload)}},j=D,L=Object(d["a"])(j,y,w,!1,null,null,null),M=L.exports;o["default"].use(k["a"]);var E=[{path:"/",name:"Home",component:M,redirect:"/",children:[{path:"/",name:"index",component:function(){return n.e("chunk-f987d758").then(n.bind(null,"0a0d"))}},{path:"/create",name:"create",component:function(){return Promise.all([n.e("chunk-45313881"),n.e("chunk-4f188ad8")]).then(n.bind(null,"2906"))}},{path:"/deployLog",name:"deployLog",component:function(){return n.e("chunk-260ea520").then(n.bind(null,"15e5"))}},{path:"/commitList",name:"commitList",component:function(){return n.e("chunk-796bdf3a").then(n.bind(null,"d1c1"))}},{path:"/createRemote",name:"createRemote",component:function(){return Promise.all([n.e("chunk-45313881"),n.e("chunk-76c82fc2")]).then(n.bind(null,"d001"))}},{path:"/user",name:"user",component:function(){return n.e("chunk-eaede570").then(n.bind(null,"dab6"))}},{path:"/personal",name:"personal",component:function(){return n.e("chunk-e032033a").then(n.bind(null,"8bbd"))}}]},{path:"/login",name:"login",component:function(){return n.e("chunk-5a134dbc").then(n.bind(null,"033a"))}}],N=new k["a"]({mode:"history",base:"/",routes:E}),z=N,q=n("2f62");o["default"].use(q["a"]);var P=new q["a"].Store({state:{title:"",config:{},roles:{admin:"管理员",general:"普通用户"},typeMap:{a:"手动 Git 部署",b:"自动 Git 部署",c:"静态部署",d:"手动 Git 远程部署",e:"自动 Git 远程部署",f:"静态远程部署"}},mutations:{setConfig:function(t,e){t.config=e||{}}},actions:{},modules:{}}),T=n("f825"),H=n.n(T),A=(n("f8ce"),n("3670"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"loading"}},[t.loading||t.isNot?n("div",{staticClass:"notdata-loading",style:{width:t.width,height:t.height}},[n("transition",{attrs:{name:"loading"}},[!t.loading&&t.isNot?n("NoData",[t._t("default")],2):t._e()],1),n("Loading",{attrs:{size:t.size},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}})],1):t._e()])}),B=[],F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"no-data"},[a("div",{staticClass:"not-inner"},[a("img",{attrs:{src:n("5c25")}}),a("div",{staticClass:"text"},[t._t("default",(function(){return[t._v("暂无数据")]}))],2)])])},G=[],W=(n("c569"),{}),J=Object(d["a"])(W,F,G,!1,null,"521245af",null),R=J.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"loading"}},[t.isOpen?n("div",{staticClass:"loading-box",class:{size:"small"==t.size}},[n("div",{staticClass:"la-ball-pulse la-2x"},[n("div"),n("div"),n("div")])]):t._e()])},U=[],V={data:function(){return{isOpen:!0}},props:["tip","value","size"],model:{prop:"value",event:"change"},watch:{value:{handler:function(t){this.isOpen=t},immediate:!0},isOpen:function(t){this.$emit("change",t)}}},K=V,Q=(n("a192"),Object(d["a"])(K,Y,U,!1,null,"2d796f6a",null)),X=Q.exports,Z=n("ed08"),tt={components:{NoData:R,Loading:X},data:function(){return{isNot:!1}},props:["loading","data","width","height","size"],watch:{data:{handler:function(t){Object(Z["a"])(t)?this.isNot=0==t.length:Object(Z["c"])(t)?this.isNot=Object(Z["b"])(t):this.isNot=!t},immediate:!0}}},et=tt,nt=(n("38e2"),Object(d["a"])(et,A,B,!1,null,"36b47423",null)),at=nt.exports,ot=n("5530"),it=(n("e9c4"),function(t){var e=window.sessionStorage.getItem(t);return!!e&&JSON.parse(e)}),st=function(t,e){return!e||(window.sessionStorage.setItem(t,JSON.stringify(e)),!0)},rt=function(t){return window.sessionStorage.removeItem(t),!0},ct=function(t,e){var n=window.sessionStorage.getItem(t);return!!n&&(n=JSON.parse(n),window.sessionStorage.setItem(t,JSON.stringify(Object(ot["a"])(Object(ot["a"])({},n),e))),!0)},lt=function(){return window.sessionStorage.clear(),!0},ut=(n("99af"),function(t){var e=P.state.config.ws||{},n=new WebSocket("ws://".concat(window.location.hostname,":").concat(e.port,"/").concat(t));return n.onerror=function(){console.log("连接错误")},n.onclose=function(){console.log("连接关闭")},n}),dt=n("bc3a"),ft=n.n(dt),pt=ft.a.create();pt.interceptors.request.use((function(t){return T["LoadingBar"].destroy(),T["LoadingBar"].start(),t})),pt.interceptors.response.use((function(t){return T["LoadingBar"].finish(),200!=t.data.code&&(T["Message"].destroy(),T["Modal"].error({title:"系统提示",content:t.data.message?t.data.message:"系统发生未知错误，请稍后再试！"})),t}),(function(t){return T["Message"].destroy(),T["LoadingBar"].error(),T["Modal"].error({title:"系统提示",content:"系统发生未知错误，请稍后再试！"}),Promise.reject(t)})),pt.defaults.baseURL="";var ht=pt,mt=n("4328"),gt=n.n(mt),vt=n("1344"),bt=Object(vt["a"])(),kt=n("4303"),yt=n.n(kt);o["default"].use(H.a),o["default"].use({install:function(t){t.component("NotDataLoading",at)}}),o["default"].prototype.$session=a,o["default"].prototype.$webSocket=ut,o["default"].prototype.$request=ht,o["default"].prototype.$qs=gt.a,o["default"].prototype.$mitt=bt,o["default"].prototype.$datetime=yt.a,z.beforeEach((function(t,e,n){sessionStorage.getItem("userInfo")||"/login"==t.path?n():n("/login")})),o["default"].config.productionTip=!1,new o["default"]({router:z,store:P,render:function(t){return t(v)}}).$mount("#app")},"5c23":function(t,e,n){"use strict";n("b7f7")},"5c25":function(t,e,n){t.exports=n.p+"img/no-data.525d0c46.png"},"5df7":function(t,e,n){},"764e":function(t,e,n){},"859a":function(t,e,n){},"93ca":function(t,e,n){t.exports=n.p+"img/logo15.9cf6d6e9.png"},"9db8":function(t,e,n){"use strict";n("859a")},a192:function(t,e,n){"use strict";n("a5a9")},a33d:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{"class-name":"log-box",title:"部署日志",scrollable:"",width:"70%","mask-closable":!1,"footer-hide":!0,closable:!t.loading},on:{"on-cancel":function(e){return t.$mitt.emit("on-log-modal-close")}},model:{value:t.isLogModal,callback:function(e){t.isLogModal=e},expression:"isLogModal"}},[t.loading?n("div",{staticClass:"progress-warp"},[n("Progress",{attrs:{percent:t.progress,status:"active","stroke-width":7}}),n("i",{staticClass:"ivu-icon ivu-icon-ios-loading"})],1):t._e(),n("div",{ref:"logWarp",staticClass:"log-warp"},[t.socketData&&t.socketData.length?n("ul",t._l(t.socketData,(function(e,a){return n("li",{key:a},[n("span",[t._v("【"+t._s(e[1])+" 】:")]),n("pre",{domProps:{innerHTML:t._s(e[2])}}),t.socketData.length-1==a&&t.loading?n("b",{staticClass:"loading"},[t._v(t._s(t.loadingStyle))]):t._e()])})),0):n("ul",[n("li",{staticStyle:{color:"#fff"}},[t._v("暂无任何日志")])])])])},o=[],i=n("2909"),s=(n("ac1f"),n("1276"),n("d3b7"),n("159b"),n("99af"),n("5319"),n("fb6a"),n("20d6")),r=n("f971"),c={components:{Decorate:s["a"],DeployTip:r["a"]},data:function(){return{isLogModal:!1,loading:!1,progress:2,loadingStyle:"⠋",frames:["⠋","⠙","⠚","⠓"],socketData:[]}},watch:{socketData:function(){var t=this;this.$nextTick((function(){var e=t.$refs.logWarp;e.scrollHeight>e.clientHeight&&(e.scrollTop=e.scrollHeight)}))}},created:function(){var t=this;this.number=0,this.time=setInterval((function(){t.number++,t.loadingStyle=t.frames[t.number-1],t.number>3&&(t.number=0)}),120),this.$mitt.on("on-log-modal",this.handleOnWebsocket)},methods:{handleOnWebsocket:function(t){this.socketData=[],this.isLogModal=!0,"init"==t.type?this.webSocketInit(t.bid,t.callBack):"log"==t.type?this.handleLogData(t.content):"close"==t.type&&this.socket&&this.socket.close()},handleLogData:function(t){var e=this;if(t){var n=t.split(" -lf-\n"),a=[];n.forEach((function(t){var n=e.handleStr(t);n[0]&&a.push(n)})),this.socketData=a}},webSocketInit:function(t,e){var n=this;this.$nextTick((function(){n.socketData=[["info",n.$datetime.format(new Date,"YYYY-MM-DD HH:mm:ss"),"Linking server, please wait..."]],n.socket=n.$webSocket(t),n.socket.onopen=function(){n.socketData.push(["info",n.$datetime.format(new Date,"YYYY-MM-DD HH:mm:ss"),"Server connection succeeded."]),e&&e(n.socket)},n.socket.onmessage=function(t){var e=JSON.parse(t.data||"{}");"info"==e.type?n.handleonWsMessage(e.data):"state"==e.type?(n.loading=!e.data.tip,n.progress=e.data.progress):"message"==e.type&&(n.socketData=[].concat(Object(i["a"])(n.socketData),[e.content]))}}))},handleonWsMessage:function(t){var e=this.handleStr(t.replace(" -lf-",""));e[0]&&(this.socketData=[].concat(Object(i["a"])(this.socketData),[e]))},handleStr:function(t){var e=t.split(" -wd- ");return e[0]&&e[2]&&0==e[2].indexOf("\n")&&(e[2]=e[2].slice(2,e[2].length)),e}},beforeDestroy:function(){clearInterval(this.time),this.$mitt.off("on-log-modal",this.handleOnWebsocket)}},l=c,u=(n("a9a7"),n("2877")),d=Object(u["a"])(l,a,o,!1,null,"40d7c83f",null);e["a"]=d.exports},a5a9:function(t,e,n){},a9a7:function(t,e,n){"use strict";n("1d41")},aae7:function(t,e,n){"use strict";n("da3c")},b7f7:function(t,e,n){},c569:function(t,e,n){"use strict";n("3d6b")},d9fc:function(t,e,n){"use strict";n("5df7")},da3c:function(t,e,n){},ed08:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return s}));n("53ca"),n("b85c"),n("ac1f"),n("00b4"),n("d3b7"),n("3ca3"),n("10d1"),n("ddb0"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("dbb4"),n("3410"),n("1bf2"),n("f8c9"),n("e9c4"),n("466d"),n("b680");var a=function(t){return JSON.stringify(t).indexOf("{")>-1},o=function(t){for(var e in t)return!1;return!0},i=function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=function(t){for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="",a=t;a>0;--a)n+=e[Math.floor(Math.random()*e.length)];return n}},f971:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tip-warp"},[n("h3",[n("Icon",{attrs:{type:"ios-help-circle-outline",size:"18"}}),n("span",[t._v("关联 Git 仓库")])],1),n("div",{staticClass:"content"},[n("div",[t._v("1、打开git：项目仓库 -> Settings -> Webhooks -> Add webhook")]),n("div",[t._v(" 2、在 "),n("span",{staticClass:"code"},[t._v("Target URL")]),t._v(" 中填入 "),n("span",{staticClass:"url"},[t._v(t._s(t.url)+"/wd/git/webhook")]),t._v(" 地址 ")]),t._m(0),t._m(1),t._m(2),n("div",[n("span",{staticStyle:{color:"red"}},[t._v("注意：")]),t._v("若项代码托管平台为GitHub时，在第 2 步中需要填入 "),n("span",{staticClass:"url"},[t._v(t._s(t.url)+"/wd/git/webhook?key=返回的key值")]),t._v(" 地址。 ")]),t.key?n("div",{staticClass:"key"},[t._v(" 项目 Key 值："),n("span",[t._v(t._s(t.key))])]):t._e()])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" 3、 "),n("span",{staticClass:"code"},[t._v("POST Content Type")]),t._v(" 选择 "),n("span",{staticClass:"select"},[t._v("application/json")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" 4、 "),n("span",[t._v(" 在 "),n("span",{staticClass:"code"},[t._v("Secret")]),t._v(" 中填入部署成功后返回的 Key 值。 ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" 5、 "),n("span",{staticClass:"code"},[t._v("Trigger On")]),t._v(" 选择 "),n("span",{staticClass:"select"},[t._v("Push Events")])])}],i={data:function(){return{url:"",key:""}},mounted:function(){this.url=window.location.origin,this.key=this.$route.query.bid}},s=i,r=(n("9db8"),n("2877")),c=Object(r["a"])(s,a,o,!1,null,"3bd6849a",null);e["a"]=c.exports}});